{"version":3,"file":"commonHelpers2.js","sources":["../src/js/02-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst elements = {\n  startBtn: document.querySelector('button[data-start]'),\n  datePicker: document.querySelector('#datetime-picker'),\n  daysSpan: document.querySelector('span[data-days]'),\n  hoursSpan: document.querySelector('span[data-hours]'),\n  minutesSpan: document.querySelector('span[data-minutes]'),\n  secondsSpan: document.querySelector('span[data-seconds]'),\n  timerWrap: document.querySelector('.timer'),\n};\n\nlet startTimer = 0;\nlet timeLeft = 0;\nelements.startBtn.setAttribute('disabled', '');\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    startTimer = selectedDates[0];\n    if (startTimer <= Date.now()) {\n      iziToast.show({\n        title: 'Error',\n        message: 'Please choose a date in the future',\n        backgroundColor: 'yellow',\n        position: 'topRight',\n      });\n      return;\n    }\n    elements.startBtn.removeAttribute('disabled');\n    elements.startBtn.addEventListener('click', handleClick);\n  },\n};\n\nflatpickr(elements.datePicker, options);\n\nfunction handleClick() {\n  elements.startBtn.setAttribute('disabled', '');\n  elements.datePicker.setAttribute('disabled', '');\n\n  addText();\n  const timerId = setInterval(() => {\n    const currentTime = Date.now();\n    timeLeft = startTimer - currentTime;\n\n    if (timeLeft <= 0) {\n      clearInterval(timerId);\n      elements.datePicker.removeAttribute('disabled');\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(timeLeft);\n\n    elements.daysSpan.textContent = days;\n    elements.hoursSpan.textContent = hours;\n    elements.minutesSpan.textContent = minutes;\n    elements.secondsSpan.textContent = seconds;\n\n    if (days <= 0 && hours <= 0 && minutes <= 0 && seconds <= 0) {\n      clearInterval(timerId);\n      elements.datePicker.removeAttribute('disabled');\n      changeText();\n    }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = addLeadingZero(Math.floor(ms / day));\n  const hours = addLeadingZero(Math.floor((ms % day) / hour));\n  const minutes = addLeadingZero(Math.floor(((ms % day) % hour) / minute));\n  const seconds = addLeadingZero(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction addText() {\n  elements.timerWrap.insertAdjacentHTML('afterbegin', '<p class=\"timer-text\">Time left:</p>');\n}\n\nfunction changeText() {\n  const timerText = document.querySelector('.timer > .timer-text');\n  timerText.textContent = 'Time\\'s up';\n}"],"names":["elements","startTimer","timeLeft","options","selectedDates","iziToast","handleClick","flatpickr","addText","timerId","currentTime","days","hours","minutes","seconds","convertMs","changeText","ms","addLeadingZero","value","timerText"],"mappings":"+IAKA,MAAMA,EAAW,CACf,SAAU,SAAS,cAAc,oBAAoB,EACrD,WAAY,SAAS,cAAc,kBAAkB,EACrD,SAAU,SAAS,cAAc,iBAAiB,EAClD,UAAW,SAAS,cAAc,kBAAkB,EACpD,YAAa,SAAS,cAAc,oBAAoB,EACxD,YAAa,SAAS,cAAc,oBAAoB,EACxD,UAAW,SAAS,cAAc,QAAQ,CAC5C,EAEA,IAAIC,EAAa,EACbC,EAAW,EACfF,EAAS,SAAS,aAAa,WAAY,EAAE,EAE7C,MAAMG,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CAErB,GADAH,EAAaG,EAAc,GACvBH,GAAc,KAAK,MAAO,CAC5BI,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,qCACT,gBAAiB,SACjB,SAAU,UAClB,CAAO,EACD,MACD,CACDL,EAAS,SAAS,gBAAgB,UAAU,EAC5CA,EAAS,SAAS,iBAAiB,QAASM,CAAW,CACxD,CACH,EAEAC,EAAUP,EAAS,WAAYG,CAAO,EAEtC,SAASG,GAAc,CACrBN,EAAS,SAAS,aAAa,WAAY,EAAE,EAC7CA,EAAS,WAAW,aAAa,WAAY,EAAE,EAE/CQ,IACA,MAAMC,EAAU,YAAY,IAAM,CAChC,MAAMC,EAAc,KAAK,MAGzB,GAFAR,EAAWD,EAAaS,EAEpBR,GAAY,EAAG,CACjB,cAAcO,CAAO,EACrBT,EAAS,WAAW,gBAAgB,UAAU,EAC9C,MACD,CAED,KAAM,CAAE,KAAAW,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUb,CAAQ,EAE5DF,EAAS,SAAS,YAAcW,EAChCX,EAAS,UAAU,YAAcY,EACjCZ,EAAS,YAAY,YAAca,EACnCb,EAAS,YAAY,YAAcc,EAE/BH,GAAQ,GAAKC,GAAS,GAAKC,GAAW,GAAKC,GAAW,IACxD,cAAcL,CAAO,EACrBT,EAAS,WAAW,gBAAgB,UAAU,EAC9CgB,IAEH,EAAE,GAAI,CACT,CAEA,SAASD,EAAUE,EAAI,CAMrB,MAAMN,EAAOO,EAAe,KAAK,MAAMD,EAAK,KAAG,CAAC,EAC1CL,EAAQM,EAAe,KAAK,MAAOD,EAAK,MAAO,IAAI,CAAC,EACpDJ,EAAUK,EAAe,KAAK,MAAQD,EAAK,MAAO,KAAQ,GAAM,CAAC,EACjEH,EAAUI,EAAe,KAAK,MAASD,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAElF,MAAO,CAAE,KAAAN,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASI,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASX,GAAU,CACjBR,EAAS,UAAU,mBAAmB,aAAc,sCAAsC,CAC5F,CAEA,SAASgB,GAAa,CACpB,MAAMI,EAAY,SAAS,cAAc,sBAAsB,EAC/DA,EAAU,YAAc,WAC1B"}